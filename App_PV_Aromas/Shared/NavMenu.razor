@inject IJSRuntime JsRuntime
@inject IAuthenticationService Auth
@attribute [Authorize]



<header class="app-header fixed-top">
    <div class="app-header-inner" style="@CollapsableClass">
        <div class="container-fluid py-2">
            <div class="app-header-content">
                <div class="row justify-content-between align-items-center">

                    <div class="col-auto">
                        <a id="sidepanel-toggler" class="sidepanel-toggler d-inline-block" href="javascript:void(0);" @onclick="ToggleNavMenu">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img">
                                <title>Menu</title>
                                <path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path>
                            </svg>
                        </a>
                    </div> 
                    <div class="search-mobile-trigger d-sm-none col">
                        <i class="search-mobile-trigger-icon fas fa-search"></i>
                    </div> 


                    <div class="app-utilities col-auto">
                        
                         

                        <div class="app-utility-item app-user-dropdown dropdown">
                            <a class="dropdown-toggle" id="user-dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">
                                <img src="images/app-logo.svg" alt="user profile">
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="user-dropdown-toggle">
                                <li>
                                    <a class="dropdown-item" href="Usuarios/Perfil">Perfil</a>
                                </li> 
                                
                                <li>
                                    <a class="dropdown-item" href="#" @onclick=Salir>Salir</a>
                                </li>
                            </ul>
                        </div> 
                    </div> 
                </div> 
            </div> 
        </div> 
    </div> 


    <div id="app-sidepanel" class="app-sidepanel @NavMenuCssClass">
        <div id="sidepanel-drop" class="sidepanel-drop" onclick="@ToggleNavMenu"></div>
        <div class="sidepanel-inner d-flex flex-column">
            <a id="sidepanel-close" class="sidepanel-close" href="javascript:void(0);" onclick="@ToggleNavMenu">&times;</a>
            <div class="app-branding">
                <a class="app-logo" href="">
                    <img class="logo-icon me-2" src="images/app-logo.svg" alt="logo"><span class="logo-text">Aromas</span> 
                </a>
              
            </div>
            <nav id="app-nav-main" class="app-nav app-nav-main flex-grow-1">
                <ul class="app-menu list-unstyled accordion" id="menu-accordion">

                    <li class="nav-item">
                        <NavLink class="nav-link" href="overview"  >
                            <span class="nav-icon">
                                <i class="fas fa-home"></i>
                            </span>
                            <span class="nav-link-text">Inicio</span>
                        </NavLink>
                    </li>


                    <li class="nav-item">
                        <NavLink class="nav-link" href="Tickets">
                            <span class="nav-icon">
                                <i class="fas fa-cash-register"></i>
                            </span>
                            <span class="nav-link-text">Facturación</span>
                        </NavLink>
                    </li>

                    <li class="nav-item">
                        <NavLink class="nav-link" href="Tickets">
                            <span class="nav-icon">
                                <i class="fas fa-store-alt-slash"></i>
                            </span>
                            <span class="nav-link-text">Cierre</span>
                        </NavLink>
                    </li>


                     <li class="nav-item has-submenu">
                        <a class="nav-link submenu-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#submenu-Usuarios" aria-expanded="true" aria-controls="submenu-usuario">
                            <span class="nav-icon">
                                <i class="fas fa-user-circle"></i>
                            </span>
                            <span class="nav-link-text">Usuarios</span>
                            <span class="submenu-arrow">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-down" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z" />
                                </svg>
                            </span> 
                        </a> 


                        <div id="submenu-Usuarios" class="collapse submenu submenu-Usuarios" data-bs-parent="#menu-accordion">
                            <ul class="submenu-list list-unstyled">
                                <li class="submenu-item">
                                    <NavLink class="submenu-link" href="Usuarios" >
                                        <span class="nav-link-text">Usuarios</span>
                                    </NavLink>
                                </li> 

                                <li class="submenu-item">
                                    <NavLink class="submenu-link" href="UsuariosPermisos">
                                        <span class="nav-link-text">Permisos</span>
                                    </NavLink>
                                </li>
                            </ul>
                        </div>
                    </li>
                     
                     

                    <li class="nav-item">
                        <NavLink class="nav-link" href="Clientes">
                            <span class="nav-icon">
                                <i class="fas fa-users"></i>
                            </span>
                            <span class="nav-link-text">Clientes</span>
                        </NavLink>
                    </li>

                      


                    <li class="nav-item has-submenu">
                        <a class="nav-link submenu-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#submenu-1" aria-expanded="true" aria-controls="submenu-1">
                            <span class="nav-icon">
                                <i class="fas fa-desktop"></i>
                            </span>
                            <span class="nav-link-text">Productos</span>
                            <span class="submenu-arrow">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-down" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z" />
                                </svg>
                            </span> 
                        </a> 
                        <div id="submenu-1" class="collapse submenu submenu-1" data-bs-parent="#menu-accordion">
                            <ul class="submenu-list list-unstyled">
                                <li class="submenu-item">
                                    <NavLink class="submenu-link" href="TipoSistemas" >
                                        <span class="nav-link-text">Categorias</span>
                                    </NavLink>
                                </li>
                                <li class="submenu-item">
                                    <NavLink class="submenu-link" href="Sistemas" >
                                        <span class="nav-link-text">Proveedores</span>
                                    </NavLink>
                                </li>

                                <li class="submenu-item">
                                    <NavLink class="submenu-link" href="Sistemas">
                                        <span class="nav-link-text">Productos</span>
                                    </NavLink>
                                </li> 

                            </ul>
                        </div>
                    </li>

                     


                    <li class="nav-item has-submenu">

                        <a class="nav-link submenu-toggle" href="#" data-bs-toggle="collapse" data-bs-target="#submenu-2" aria-expanded="false" aria-controls="submenu-2">
                            <span class="nav-icon">
                                <i class="fas fa-file-excel"></i>
                            </span>
                            <span class="nav-link-text">Reportes</span>
                            <span class="submenu-arrow">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-down" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z" />
                                </svg>
                            </span>
                        </a>
                        <div id="submenu-2" class="collapse submenu submenu-2" data-bs-parent="#menu-accordion">
                            <ul class="submenu-list list-unstyled">
                                <li class="submenu-item">
                                    <a class="submenu-link" href="Reporte/Tiquetes">Ventas</a>
                                </li>
                                
                                <li class="submenu-item">
                                    <a class="submenu-link" href="Reporte/Auditoria">Productos</a>
                                </li>
                                
                                <li class="submenu-item">
                                    <a class="submenu-link" href="Reporte/Encuestas">Inventario</a>
                                </li>

                            </ul>
                        </div>
                    </li>
                     




                   
                </ul> 



            </nav> 
          
        </div> 
    </div> 
</header> 


@code {
    [Parameter] public EventCallback<bool> OnPanelToggled { get; set; }


    private bool _collapseNavMenu = true;

    // private string? NavMenuCssClass => _collapseNavMenu ? "sidepanel-visible" : "sidepanel-hidden";
    private string? NavMenuCssClass => _collapseNavMenu ? "sidepanel-visible " : "sidepanel-hiden app-sidepanel-close";
    private string? CollapsableClass => _collapseNavMenu ? "margin-left: 250px;" : "margin-left: 0px;";

    private void ToggleNavMenu()
    {
        _collapseNavMenu = !_collapseNavMenu;

        OnPanelToggled.InvokeAsync(_collapseNavMenu);
    }

    protected override async Task OnInitializedAsync()
    {
        var dimension = await JsRuntime.InvokeAsync<WindowDimension>("getWindowDimensions");
        _collapseNavMenu = dimension.Width >= 1200;
    }
     

    public async Task Salir()
    {
        await Auth.Logout();
    }

}